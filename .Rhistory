library(readxl)
dir()
read_excel("~/data/Listado_Camaras.xlsx",1)
read_excel("~/data/Listado_Camaras.xlsx",1)
read_excel("~//data/Listado_Camaras.xlsx",1)
read_excel("C:\\Users\\Alvaro Chirino\\Documents\\GitHub\\endemocracia_redes\\data\\Listado_Camarasxlsx",1)
read_excel("C:\\Users\\Alvaro Chirino\\Documents\\GitHub\\endemocracia_redes\\data\\Listado_Camaras.xlsx",1)
bdsen<-read_excel("C:\\Users\\Alvaro Chirino\\Documents\\GitHub\\endemocracia_redes\\data\\Listado_Camaras.xlsx",1,"B2:K58")
View(bdsen)
library(dplyr)
install.packages("RSelenium")
install.packages("rvest")
install.packages("tidyverse")
library(RSelenium)
library(rvest)
library(tidyverse)
bdsen<-read_excel("C:\\Users\\Alvaro
Chirino\\Documents\\GitHub\\endemocracia_redes\\data\\Listado_Camaras.xlsx",1,"B2:K58")
bdsen<-read_excel("C:\\Users\\Alvaro Chirino\\Documents\\GitHub\\endemocracia_redes\\data\\Listado_Camaras.xlsx",1,"B2:K58")
rD <- rsDriver(browser="firefox", port=4545L, verbose=F)
remDr <- rD[["client"]]
#abriendo navegador
rD <- rsDriver(browser="firefox", port=4545L, verbose=F)
#abriendo navegador
rD <- rsDriver(browser="firefox", port=4545L, verbose=F)
remDr <- rD[["client"]]
#abriendo navegador
rD <- rsDriver(browser="firefox")
driver <- rsDriver(browser=c("chrome"))
#abriendo navegador
rD <- rsDriver(browser="firefox", port=4567L)
#abriendo navegador
rD <- rsDriver(browser="firefox", port=4837L)
driver <- rsDriver(browser=c("chrome"), port=4837L)
driver <- rsDriver(browser=c("chrome"), port=4860L)
#abriendo navegador
rD <- rsDriver(browser="firefox")
#abriendo navegador
rD <- rsDriver(browser="firefox", port=4860L)
#abriendo navegador
rD <- rsDriver(browser="firefox", port=4870L)
#abriendo navegador
rD <- rsDriver(browser="firefox", port=4870L)
#abriendo navegador
rD <- rsDriver(browser="firefox", port=4880L)
#abriendo navegador
rD <- rsDriver(browser="firefox", port= free_port())
#abriendo navegador
rD1 <- rsDriver(browser = "chrome", port = 4567L, geckover = NULL,
chromever =  "latest", iedrver = NULL,
phantomver = NULL, extraCapabilities = cprof)
#abriendo navegador
rD1 <- rsDriver(browser = "chrome", port = 4577L, geckover = NULL,
chromever =  "latest", iedrver = NULL,
phantomver = NULL, extraCapabilities = cprof)
#abriendo navegador
rD1 <- rsDriver(browser = "chrome", port = 4577L, geckover = NULL,
chromever =  "latest", iedrver = NULL,
phantomver = NULL)
#abriendo navegador
rD1 <- rsDriver(browser = "chrome", port = 4477L, geckover = NULL,
chromever =  "latest", iedrver = NULL,
phantomver = NULL)
#abriendo navegador
rD1 <- rsDriver(browser = "firefox", port = 4377L, geckover = NULL,
chromever =  "latest", iedrver = NULL,
phantomver = NULL)
#abriendo navegador
rD1 <- rsDriver(browser = "chrome", port = 4447L, geckover = NULL,
chromever =  "latest", iedrver = NULL,
phantomver = NULL)
errorDetails
#abriendo navegador
rD1 <- rsDriver(browser = "chrome", port = 4147L, geckover = NULL,
chromever =  "latest", iedrver = NULL,
phantomver = NULL)
bdsen<-read_excel("C:\\Users\\Alvaro Chirino\\Documents\\GitHub\\endemocracia_redes\\data\\Base_v0.xlsx",1)
bdm<-read_excel("C:\\Users\\Alvaro Chirino\\Documents\\GitHub\\endemocracia_redes\\data\\Base_v0.xlsx",1)
bdm$twitter
bdm %>% filter(twitter!="")
bdm<-bdm %>% filter(twitter!="")
View(bdm)
library(rtweet)
install.packages("rtweet")
library(rtweet)
library(rtweet)
library(help=rtweet)
?tweets_data()
tweets_data("@AlvaroChirinoG")
get_friends("@AlvaroChirinoG")
tweets_data("@AlvaroChirinoG")
get_followers("@AlvaroChirinoG")
get_timelines("@AlvaroChirinoG")
bdm$twitter
get_timelines("larazon_bolivia")
i<-1
bdm$twitter[i]
get_timelines(bdm$twitter[i])
bdm<-read_excel("C:\\Users\\Alvaro Chirino\\Documents\\GitHub\\endemocracia_redes\\data\\Base_v0.xlsx",1)
i<-1
bdm$twitter[i]
bdm<-read_excel("C:\\Users\\Alvaro Chirino\\Documents\\GitHub\\endemocracia_redes\\data\\Base_v0.xlsx",1)
bdm<-bdm %>% filter(twitter!="")
bdm$twitter[i]
i<-1
bdm$twitter[i]
bdm<-read_excel("C:\\Users\\Alvaro Chirino\\Documents\\GitHub\\endemocracia_redes\\data\\Base_v0.xlsx",1)
bdm<-bdm %>% filter(twitter!="")
i<-1
bdm$twitter[i]
get_timelines(bdm$twitter[i])
get_followers(bdm$twitter[i])
i<-1
bdm$twitter[i]
lookup_users(bdm$twitter[i])
aux<-lookup_users(bdm$twitter[i])
View(aux)
?get_timelines(bdm$twitter[i])
aux2<-get_timelines(bdm$twitter)
View(aux2)
bdm$twitter
aux<-lookup_users(bdm$twitter)
aux<-lookup_users(bdm$twitter)
View(aux)
bdm$twitter
bdm$twitter
gsub(" ","",bdm$twitter)
bdm$twitter<-gsub(" ","",bdm$twitter)
aux<-lookup_users(bdm$twitter)
?lookup_users
for(i in 1:nrow(bdm)){
}
aux<-NULL
for(i in 1:nrow(bdm)){
print(bdm$twitter[i])
aux<-rbind(lookup_users(bdm$twitter[i]),aux  )
}
bdm$twitter<-gsub(" ","",bdm$twitter,fixed = T)
bdm$twitter
aux
bdm$twitter<-gsub("@","",bdm$twitter,fixed = T)
bdm$twitter
bdm$twitter<-gsub(" ","",bdm$twitter,fixed = T)
bdm$twitter
library(stringr)
str_trim(bdm$twitter)
bdm<-read_excel("C:\\Users\\Alvaro Chirino\\Documents\\GitHub\\endemocracia_redes\\data\\Base_v0.xlsx",1)
bdm<-bdm %>% filter(twitter!="")
bdm$twitter
bdm$twitter<-str_trim(bdm$twitter)
bdm$twitter
bdm$twitter<-str_trim(bdm$twitter,side=c("both"))
bdm$twitter
bdm$twitter<-gsub(" ","",bdm$twitter,fixed = T)
bdm$twitter<-gsub("@","",bdm$twitter,fixed = T)
bdm$twitter
aux<-NULL
for(i in 1:nrow(bdm)){
print(bdm$twitter[i])
aux<-rbind(lookup_users(bdm$twitter[i]),aux  )
}
aux
lookup_users(bdm$twitter[i])
aux<-rbind(lookup_users(bdm$twitter[i]),aux  )
names(aux)
vv<-c("user_id",
"status_id",
"created_at",
"screen_name",
"followers_count")
aux<-rbind(lookup_users(bdm$twitter[i])[,vv],aux  )
aux<-NULL
for(i in 1:nrow(bdm)){
print(bdm$twitter[i])
aux<-rbind(lookup_users(bdm$twitter[i])[,vv],aux  )
}
lookup_users(bdm$twitter[i])
lookup_users(bdm$twitter[i])[,vv]
lookup_users(bdm$twitter[i])
nrow(lookup_users(bdm$twitter[i]) )
aux<-NULL
for(i in 1:nrow(bdm)){
print(bdm$twitter[i])
aa<-lookup_users(bdm$twitter[i])
if(nrow(aa)>0){
aux<-rbind(aa[,vv],aux  )
}
}
aa
aa[,vv]
aux
str(aa)
aa[,vv]
aa<-aa[,vv]
str(aa)
str(aux)
names(aa)
aa<-lookup_users(bdm$twitter[i])
vv<-c("user_id","screen_name","followers_count","profile_image_url")
aux<-NULL
for(i in 1:nrow(bdm)){
print(bdm$twitter[i])
aa<-lookup_users(bdm$twitter[i])
if(nrow(aa)>0){
aux<-rbind(aa[,vv],aux  )
}
}
lookup_users(bdm$twitter[i])
aux$screen_name
aux2<-get_timelines(aux$screen_name)
?get_timelines
aux2$created_at
library(lubridate)
day(aux2$created_at)
ymd(aux2$created_at)
(aux2$created_at)
library(help=lubridate)
as_date(aux2$created_at)
today()
aux2 %>% filter(as_date(created_at)==today())
aux2<-aux2 %>% filter(as_date(created_at)==today())
today()
today()-1
aux2<-aux2 %>% filter(as_date(created_at)==today())
aux2$text
aux2 %>% group_by(screen_name) %>% count()
?get_timelines
aa<-lookup_users(bdm$twitter[i])
aa$retweet_text
aux2<-get_timelines(aux$screen_name,n=200)
aux2<-aux2 %>% filter(as_date(created_at)==today())
aux2 %>% group_by(screen_name) %>% count()
aux2 %>% filter(screen_name=="ErbolDigital") %>% select(text)
time()
today()
##funciones
#vectores de texto
nube<-function(aux){
docs<-Corpus(VectorSource(aux))
docs <- docs %>%
tm_map(removeNumbers) %>%
tm_map(removePunctuation) %>%
tm_map(stripWhitespace)
docs <- tm_map(docs, content_transformer(tolower))
docs <- tm_map(docs, removeWords, stopwords("sp"))
dtm <- TermDocumentMatrix(docs)
matrix <- as.matrix(dtm)
words <- sort(rowSums(matrix),decreasing=TRUE)
df <- data.frame(word = names(words),freq=words)
return(df)
}
nube(aux2$text)
df<-nube(aux2$text)
library(tm)
install.packages("tm")
df<-nube(aux2$text)
library(tm)
df<-nube(aux2$text)
wordcloud2(data=df,color='random-dark',size=0.5,shape = 'pentagon')
library(wordcloud2)
install.packages("wordcloud2")
library(wordcloud2)
wordcloud2(data=df,color='random-dark',size=0.5,shape = 'pentagon')
wordcloud2(data=df,color='random-dark',size=0.5,shape = 'pentagon')
##funciones
#vectores de texto
nube<-function(aux,palabras){
docs<-Corpus(VectorSource(aux))
docs <- docs %>%
tm_map(removeNumbers) %>%
tm_map(removePunctuation) %>%
tm_map(stripWhitespace)
docs <- tm_map(docs, content_transformer(tolower))
docs <- tm_map(docs, removeWords, stopwords("sp"))
docs <- tm_map(docs, removeWords, palabras)
dtm <- TermDocumentMatrix(docs)
matrix <- as.matrix(dtm)
words <- sort(rowSums(matrix),decreasing=TRUE)
df <- data.frame(word = names(words),freq=words)
return(df)
}
df<-nube(aux2$text,c("bolivia",aux$screen_name))
wordcloud2(data=df,color='random-dark',size=0.5,shape = 'pentagon')
df<-nube(aux2$text,c("bolivia",aux$screen_name,btvinforma))
df<-nube(aux2$text,c("bolivia",aux$screen_name,"btvinforma"))
wordcloud2(data=df,color='random-dark',size=0.5,shape = 'pentagon')
depto<-c("chuquisaca","lapaz","cochabamba","oruro","potosí","tarija","beni","pando","santacruz")
df<-nube(aux2$text,c("bolivia",aux$screen_name,"btvinforma",depto))
wordcloud2(data=df,color='random-dark',size=0.5,shape = 'pentagon')
#controlando el peso de máximo 10 noticias por medio
aux2 %>% mutate(nn=1) %>% group_by(screen_name) %>% mutate(nn=cumsum(nn))
#controlando el peso de máximo 10 noticias por medio
aux2<-aux2 %>% mutate(nn=1) %>% group_by(screen_name) %>% mutate(nn=cumsum(nn))
head(axu2)
head(aux2)
View(aux2)
df<-nube(aux2 %>% filter(nn<10) %>% select(text),c("bolivia",aux$screen_name,"btvinforma",depto))
wordcloud2(data=df,color='random-dark',size=0.5,shape = 'pentagon')
df<-nube(aux2 %>% filter(nn<10) %>% select(text),c("bolivia",aux$screen_name,"btvinforma",depto,"urgentebo"))
wordcloud2(data=df,color='random-dark',size=0.5,shape = 'pentagon')
df<-nube(aux2 %>% filter(nn<10) %>% select(text),c("bolivia",aux$screen_name,"btvinforma",depto,"urgentebo","erboldigital"))
wordcloud2(data=df,color='random-dark',size=0.5,shape = 'pentagon')
df1<-nube(aux2$text,c("bolivia",aux$screen_name,"btvinforma",depto,"urgentebo"))
wordcloud2(data=df,color='random-dark',size=0.5,shape = 'pentagon')
aux2<-aux2 %>% filter(as_date(created_at)==today())
df1<-nube(aux2$text,c("bolivia",aux$screen_name,"btvinforma",depto,"urgentebo"))
wordcloud2(data=df,color='random-dark',size=0.5,shape = 'pentagon')
df1<-nube(aux2$text,c("bolivia",aux$screen_name,"btvinforma",depto,"urgentebo"))
wordcloud2(data=df1,color='random-dark',size=0.5,shape = 'pentagon')
df2<-nube(aux2 %>% filter(nn<10) %>% select(text),c("bolivia",aux$screen_name,"btvinforma",depto,"urgentebo","erboldigital"))
wordcloud2(data=df2,color='random-dark',size=0.5,shape = 'pentagon')
